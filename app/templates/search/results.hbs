{{log (concat "got features? " nodeFeaturePseudoDatasets)}}
<section class="container full-page">
  {{scroll-magnet animationLength=(if shouldSmoothScroll ENV.animation.scrollingBaseDuration 0)}}
  <div class="row">
    <div class="col-12">
      <h2>View & Compare</h2>
    </div>
    <div class="col-12 col-md-7 col-lg-6">
      <p class="lead">Here's all the datasets Plenar.io found that match your search.</p>
      <p>
        Click on datasets to select them or deselect them, then click <kbd class="bg-light text-dark">Compare</kbd> to see what they
        look like together.
      </p>
    </div>
    <div class="col-12 col-md-5 col-lg-6 mb-3 mb-md-0">
      <div class="card card-outline-info">
        <div class="card-header bg-info text-white">
          {{fa-icon "info-circle"}}&ensp;Tips
          {{#unless media.isMd}}
              <a class="d-block hidden-md-up float-right" onclick="return false;" {{action (unless media.isMd "toggleCollapse" (optional "")) "results-tip-body"}}>
                {{fa-icon (if isExpanded.resultsTipBody "chevron-up" "chevron-down")}}
              </a>
          {{/unless}}
        </div>
        {{#bs-collapse collapsed=(not isExpanded.resultsTipBody media.isMd) transitionDuration=(if media.isMd 0 ENV.animation.stateChangeBaseDuration)}}
          <div class="card-body {{if media.isMd "show"}}" id="results-tip-body">
            <p class="card-text small text-muted">
              If you want to modify your search, scroll back up and tweak things (don't forget to click
              <kbd class="bg-light text-muted">Search</kbd> again!) or click <kbd class="bg-light text-muted">Reset</kbd> to
              start over.
            </p>
          </div>
        {{/bs-collapse}}
      </div>
    </div>
  </div>
  <div id="results-tables-container">
    {{#if displayNodeFeatureTable}}
      <div class="row">
        <div class="col-12">
          <h3 class="h5">Data From Sensor Nodes</h3>
        </div>
      </div>
      {{!-- Height value below is (5 * (row height)), where (row height) = ((1.5 * 1rem) + (2 * 0.3rem)) --}}
      {{lt-search-results nodeFeaturePseudoDatasets columns=nodeFeatureTableColumns
                          onSelectionChanged="userDidChangeSelection" height="10.5rem"}}
    {{/if}}
    {{#if displayOpenDataTable}}
      <div class="row">
        <div class="col-12">
          <h3 class="h5">Data From Open Data Providers</h3>
        </div>
      </div>
      {{!-- Height value below is (6 * (row height)), where (row height) = ((1.5 * 1rem) + (2 * 0.3rem)) --}}
      {{lt-search-results openDataProviderDatasets columns=openDataTableColumns
                          onSelectionChanged="userDidChangeSelection" height="12.6rem"}}
    {{/if}}
    {{#if (not displayNodeFeatureTable displayOpenDataTable)}}
      <div class="row">
        <div class="col-12 col-md-9 mx-md-auto my-5">
          <div class="card bg-light">
            <div class="card-body text-center">
              <p class="card-text lead text-muted">
                {{#fa-stack size="lg" as |s|}}
                  {{s.stack-2x "search"}}
                  {{s.stack-1x "file-text-o"}}
                {{/fa-stack}}
              </p>
              <p class="card-text lead text-muted">
                Sorry, no data was found in the selected geographic region for the specified date range.
              </p>
              <p class="card-text small text-muted">
                Try modifying your query and searching again.
              </p>
            </div>
          </div>
        </div>
      </div>
    {{/if}}
  </div>
  {{#unless (not displayNodeFeatureTable displayOpenDataTable)}}
    <div class="col-12 px-0">
      {{#bs-button id="compare-submit-button" type="primary" block=true
                   disabled=(not userHasMadeASelection) onClick=(action "compareSelectedDatasets")}}
        Compare&emsp;{{fa-icon "arrow-right"}}
      {{/bs-button}}
    </div>
  {{/unless}}
</section>

